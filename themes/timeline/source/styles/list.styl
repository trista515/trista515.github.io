@import './variables.styl'
prefix= 'post-summary'

.post-list
  position: relative
  margin: auto
  clearfix()

  li
    &:nth-child(odd) .{prefix}::after
      absolute: top 30px left 100%
    &:nth-child(even) .{prefix}::after
      absolute: top 180px right 100%

  for i in (1..nav-length)
    li
      .{prefix}-category-{i}
        background-color color-category + i
      &:nth-child(odd)
        .{prefix}-category-{i}::after
          border-left-color color-category + i
      &:nth-child(even)
        .{prefix}-category-{i}::after
          border-right-color color-category + i


.post-summary
  position: relative
  float: left
  margin: 15px 5%
  size(40% 500px)
  vertical-align: top
  border-radius: 5px

  &::after
    content: ''
    position: absolute
    display: block
    border-width: 20px
    border-style: solid
    border-color: transparent

  .{prefix}-cover
    display: block
    position: relative
    margin: 20px
    height: 60%
    border-radius: 5px 5px 0 0
    cursor: pointer

    .{prefix}-cover-img
      size(100%)
    .{prefix}-cover-icon
      opacity: 0
      absolute: top 0 bottom 0 left 0 right 0
      margin: auto
      size(75px)
      font-size: 75px
      transition: all 200ms ease

    &::before
      content: ''
      opacity: 0
      absolute: top 0
      size(100%)
      background-color: alpha(#000, 0.7)
      transition: all 200ms ease

    &:hover
      ::before
        opacity: 1
      .{prefix}-cover-icon
        opacity: 1

  .{prefix}-title
    display: table-cell
    padding: 20px 20px 10px 20px
    size(500px 80px)
    font-size: 32px
    text-align: center
    vertical-align: middle
    overflow: hidden

  .{prefix}-excerpt
    display: none
    margin: 10px 0
    padding: 0 20px
    height: 160px
    overflow: hidden
    letter-spacing: 2px


  .{prefix}-comments
    absolute: left 20px bottom 20px
    font-size: 12px
    a
      relative: left 20px

  .{prefix}-comments-icon
    size(12px 10px)
    border-radius: 2px
    &:after
      absolute: top 10px left 4px
      border-width: 2px 2px

  .{prefix}-tags
    absolute: left 50px bottom 20px
    font-size: 12px

  .{prefix}-plus
    absolute: right -10px bottom 20px
    >*
      vertical-align: middle !important

horizontal-post-summary-cover(h)
  float: left
  size(45% h - 40px)
  &:after
    content: ''
    position: absolute
    margin-left: 20px
    height: 100%
    border-right: 1px dotted color-border

vertical-post-summary-cover(h)
  float: none
  size(initial h)
  border: none

@media screen and (min-width: 1281px)
  .post-list
    li
      &:nth-child(odd) .{prefix}
        margin: 15px 4% 15px 6%
      &:nth-child(even) .{prefix}
        margin: 15px 6% 15px 4%


  .{prefix}
    height: 360px
    .{prefix}-cover
      horizontal-post-summary-cover(360px)
    .{prefix}-title
      text-align: left
    .{prefix}-excerpt
      display: block
    .{prefix}-comments,
    .{prefix}-tags
      margin-left: 50%


@media screen and (max-width: 960px)
  .post-list
    width: 85%
    margin-left: 88px

    li
      &:nth-child(odd) .{prefix}::after,
      &:nth-child(even) .{prefix}::after
        top: 75px
      &:nth-child(odd) .{prefix}::after,
      &:nth-child(even) .{prefix}::after
        left: -40px;

    for i in (1..nav-length)
      li:nth-child(odd)
        .{prefix}-category-{i}::after
          border-left-color: transparent
          border-right-color: color-category + i

  .{prefix}
    size(100% 360px)
    margin: 10px

    .{prefix}-cover
      horizontal-post-summary-cover(360px)
    .{prefix}-title
      text-align: left
    .{prefix}-excerpt
      display: block
    .{prefix}-comments,
    .{prefix}-tags
      margin-left: 50%



@media screen and (max-width: 720px)
  .{prefix}
    width: 90%
    .{prefix}-cover
      vertical-post-summary-cover(60%)
      &::after
        display: none
    .{prefix}-title
      padding: 0 20px
      height: 30px
      font-size: 24px
      text-align: center
    .{prefix}-excerpt
      display: none
    .{prefix}-comments,
    .{prefix}-tags
      margin-left: 0


@media screen and (max-width: 640px)
  .post-list
    margin-left: 15%

@media screen and (max-width: 480px)
  .post-list
    width: 84%
    margin-left: 50px

    li
      &:nth-child(odd) .{prefix}::after,
      &:nth-child(even) .{prefix}::after
        left: -30px
        border-width: 15px

    .{prefix}-comments,
    .{prefix}-tags,
    .{prefix}-plus
      display: none
